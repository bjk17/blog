<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Bjarni Jens's blog</title><link href="//blog.bjk.is/" rel="alternate"></link><link href="//blog.bjk.is/feeds/all.atom.xml" rel="self"></link><id>//blog.bjk.is/</id><updated>2016-05-23T00:00:00+00:00</updated><entry><title>What I'm aiming for</title><link href="//blog.bjk.is/what-im-aiming-for.html" rel="alternate"></link><published>2016-05-23T00:00:00+00:00</published><author><name>Bjarni Jens Kristinsson</name></author><id>tag:blog.bjk.is,2016-05-22:what-im-aiming-for.html</id><summary type="html">&lt;p&gt;Before I moved my NUC I had two Raspberry Pis (web server and &lt;a href="https://kodi.tv/"&gt;XBMC/Kodi&lt;/a&gt; media player) and one &lt;a href="http://docs.cubieboard.org/tutorials/cubietruck/start"&gt;Cubietruck&lt;/a&gt; (NFS server) under the TV. The NUC will take over those tasks and provide me with better hardware to test new &lt;em&gt;features&lt;/em&gt;. As I'm living in a small studio apartment with my girlfriend I'll try my best to keep it as silent as its predecessors.&lt;/p&gt;
&lt;h3&gt;A server and HTPC&lt;/h3&gt;
&lt;p&gt;My NUC will not only be a server. I'm taking down the RPi running Kodi and connecting the HDMI cable to the NUC instead. I want to be running a whole DE (Desktop Environment) both for when I turn on the TV and also to have a remote desktop I'd be able to connect to over the internet. Sure, I can do most of the stuff through SSH, but this is one aspect of "poking around with" I'd like to try out.&lt;/p&gt;
&lt;p&gt;I'm going to install Ubuntu 16.04 and I need to chose between installing the server version and applying the &lt;code&gt;ubuntu-desktop&lt;/code&gt; package on top, or installing Ubuntu Desktop and configure server packages afterwards. The semantically correct way would be to install Ubuntu Server and run the DE as a secure and isolated service. I even posted &lt;a href="http://askubuntu.com/questions/765612/running-ubuntu-desktop-in-lxc-lxd-on-top-of-ubuntu-server/"&gt;a question on Askubuntu&lt;/a&gt; wether this was possible using Linux containers (LXC) but haven't gotten any helpful responses yet.&lt;/p&gt;
&lt;h3&gt;Monitoring&lt;/h3&gt;
&lt;p&gt;I'm using this opportunity to build my server &lt;a href="https://en.wikipedia.org/wiki/Top-down_and_bottom-up_design"&gt;bottom-up&lt;/a&gt;. I think that's the right way to build quality software and infrastructure. That means that after I've installed the OS the first thing I should do (after securing SSH) is to set up some kind of monitoring.&lt;/p&gt;
&lt;p&gt;My main points of interest are physical monitoring such as temperature of core components and frequencies of fan and CPU. I want to be well aware of hardware utilization such as SSD/HDD free space and IO, memory usage and network IO. I'm very curious of power usage but it seems I can't read out those stats from the OS unless I buy some kind of (smart) power meter to plug into the wall. When I used a Linux laptop I could read the Watt usage straight from the battery.&lt;/p&gt;
&lt;p&gt;On top of these core metrics there are some extra bits of information I'd like to have displayed on the dashboard. F.ex. how many SSH sessions are currently open, is the HDD in active or standby state, how long since I last rebooted? These are basically metrics that I can produce with simple commands or shell scripts. Later I could add application monitoring for websites and other software I'd be running on the NUC. &lt;/p&gt;
&lt;p&gt;The dashboard would be presented as a website that would be served on an obscure port on the NUC that would not be open to the internet (because this is sensitive information). However, I would be able to view it on my local net as well as remotely by setting up &lt;a href="https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding"&gt;SSH port forwarding&lt;/a&gt;. &lt;/p&gt;
&lt;h3&gt;Web services&lt;/h3&gt;
&lt;p&gt;I own the domain bjk.is which I will use to connect to the machine and host my main personal website. I will add additional DNS entries beta.bjk.is, bio.bjk.is and now blog.bjk.is for my different subsites (some in collaboration with others). I would like to do that the right way by isolating the websites from the core server and implement them as "detachable components".&lt;/p&gt;
&lt;p&gt;At NextCODE we use &lt;a href="https://aws.amazon.com/"&gt;Amazon Web Services&lt;/a&gt; (AWS) quite a lot. We also manage our own infrastructure with software from &lt;a href="https://www.vmware.com/"&gt;VMware&lt;/a&gt; and &lt;a href="https://www.greenqloud.com/"&gt;Greenqloud&lt;/a&gt;. Both AWS and Greenqloud's &lt;a href="https://www.qstack.com/"&gt;Qstack&lt;/a&gt; have web-based interfaces (as well as scriptable API's) where we can create and start virtual machines (VM) with a public IP address and configurable amount of CPU cores, RAM and storage.&lt;/p&gt;
&lt;p&gt;This sort of &lt;a href="https://en.wikipedia.org/wiki/Cloud_computing#Infrastructure_as_a_service_.28IaaS.29"&gt;infrastructure as a service&lt;/a&gt; (IaaS) is what I aim for when setting up the NUC. There are a lot of limitations, though, as I only have one physical computer and one public IP address to work with. But to some degree I can seperate websites and other processes into pluggable independent containers or VMs that won't affect each other.&lt;/p&gt;
&lt;h3&gt;Network-attached storage (NAS)&lt;/h3&gt;
&lt;p&gt;The underlying server OS have direct access to all the hardware, including the 2TB spinning HDD with all my data (don't worry, I do backups). Therefore, the server OS should also be responsible of exposing and sharing the data with all parties involved. The media player in the DE needs access to it, my other computers on the home network do so too and maybe some future application running on NUC as well. When I'm not at home I want to be able to mount the data drive over the internet. The SSD is dedicated for the OS and other software whether it's core server or running inside containers/VMs.&lt;/p&gt;
&lt;p&gt;In the next blog post(s) I'll write about what feature boxes I managed to tick and how I implemented them.&lt;/p&gt;</summary><category term="DevOps"></category><category term="infrastructure"></category><category term="Ubuntu"></category></entry><entry><title>My hobby project</title><link href="//blog.bjk.is/my-hobby-project.html" rel="alternate"></link><published>2016-05-15T00:00:00+00:00</published><author><name>Bjarni Jens Kristinsson</name></author><id>tag:blog.bjk.is,2016-05-15:my-hobby-project.html</id><summary type="html">&lt;p&gt;So, the main idea behind this blog is to write about what I've done and what I'm about to with this hobby project of mine.&lt;/p&gt;
&lt;p&gt;In a nutshell, I want to learn about Linux, servers, networking, infrastructure and all the best-practises there is to set up and manage my own servers and infrastructure.&lt;/p&gt;
&lt;h3&gt;The inspiration&lt;/h3&gt;
&lt;p&gt;In my undergraduate studies I wrote a &lt;a href="http://skemman.is/handle/1946/22017"&gt;research thesis&lt;/a&gt; on &lt;em&gt;occurrence graphs&lt;/em&gt; under the guidance of &lt;a href="http://ulfarsson.github.io/research.html"&gt;Henning Ulfarsson&lt;/a&gt; from Reykjavik University. Our work could be categorized as &lt;a href="https://en.wikipedia.org/wiki/Experimental_mathematics"&gt;experimental mathematics&lt;/a&gt; because of it's heavy reliance on computer analysis. To get a feeling for our new objects and mathematical structures we often wrote simple programs that looped over millions and billions and even trillions (that's a whopping &lt;span class="math"&gt;\(10^{12}\)&lt;/span&gt;) of permutations to do some simple computations and then aggregate the results over the permutations to a sequence of numbers, something that we have &lt;a href="https://en.wikipedia.org/wiki/Sequence"&gt;a much better understanding of&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;What I realized then, and have not stopped thinking about, is how extremely parallell these computations were. Today, all the rage is about &lt;a href="https://en.wikipedia.org/wiki/General-purpose_computing_on_graphics_processing_units"&gt;programming on the graphics processing units&lt;/a&gt; (GPUs) for parallel tasks. It's all well and good when you have a &lt;a href="https://en.wikipedia.org/wiki/Shared_memory"&gt;shared memory model&lt;/a&gt;, but what if all your parallel tasks can work completely on their own on completely different computers and needed just a simple and short job description? In my and Henning's scenario the job description would only have been a few bytes, given the other computers would have the necessary libraries to do the calculations. I think &lt;a href="http://www.coindesk.com/information/get-started-mining-pools/"&gt;Bitcoin mining pools&lt;/a&gt; works this way.&lt;/p&gt;
&lt;p&gt;My inspiration is to learn enough to be able to &lt;em&gt;expand&lt;/em&gt; my computer and it's computing capabilities to another machine. Eventually I'd be able to &lt;a href="https://en.wikipedia.org/wiki/Scalability#Horizontal_and_vertical_scaling"&gt;scale my computer horizontally&lt;/a&gt; to more computers, over the internet, all over the world.&lt;/p&gt;
&lt;p&gt;I want to poke around to see what's possible and what's not.&lt;/p&gt;
&lt;h3&gt;So I need another computer&lt;/h3&gt;
&lt;p&gt;My first step must therefore be to set up my own server that I can experiment with. And in line with my mathematical background, I want to do it &lt;em&gt;the right way&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;I've been tinkering with Linux servers for the last 3-4 years now. I own several Raspberry Pi's and other &lt;a href="https://en.wikipedia.org/wiki/Single-board_computer"&gt;single-board computers&lt;/a&gt; that I've used, among other things, as web servers. I've earned some experience at my work for &lt;a href="https://www.nextcode.com/"&gt;WuXi NextCODE&lt;/a&gt; where I often have to debug Linux server errors.&lt;/p&gt;
&lt;p&gt;But I didn't want to set up another handicapped low-performing Raspberry Pi. Instead I chose to relocate my &lt;a href="http://www.intel.com/content/www/us/en/nuc/nuc-kit-d54250wykh.html"&gt;Intel NUC&lt;/a&gt; with a 15W &lt;a href="http://www.cpubenchmark.net/cpu.php?cpu=Intel+Core+i5-4250U+%40+1.30GHz"&gt;Intel Core i5-4250U&lt;/a&gt; processor, &lt;a href="http://ssd.userbenchmark.com/SpeedTest/12612/Crucial--CT128M550SSD3"&gt;128GB Crucial M550 mSATA&lt;/a&gt; SSD, 2TB spinning HDD (taken from a &lt;a href="http://www.seagate.com/gb/en/products/laptop-mobile-storage/laptop-external-drives/backup-plus/"&gt;Seagate's Backup Plus Portable Drives&lt;/a&gt; unit) and &lt;a href="http://www.pc-specs.com/ram/Crucial/Crucial_BLS2C8G3N169ES4CEU_Arbeitsspeicher_16GB_Kit_(Zwei_8GB_RAMs)_DDR3-RAM/322"&gt;16GB DDR3L 1600MHz memory&lt;/a&gt; from Crucial.&lt;/p&gt;
&lt;p&gt;I put my NUC under the TV and plugged it into the router. In the following blog posts I'll write about how I wanted the server to turn out and what I managed to do in my first attempt.&lt;/p&gt;
&lt;p&gt;&lt;img alt="My NUC and my router" src="//blog.bjk.is/static/IMG_1295.jpg" /&gt;&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' &amp;&amp; location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</summary><category term="DevOps"></category><category term="infrastructure"></category></entry><entry><title>I'm starting a blog</title><link href="//blog.bjk.is/im-starting-a-blog.html" rel="alternate"></link><published>2016-05-07T00:00:00+00:00</published><author><name>Bjarni Jens Kristinsson</name></author><id>tag:blog.bjk.is,2016-05-07:im-starting-a-blog.html</id><summary type="html">&lt;p&gt;When you're working on a project you need to take notes. And when your project revolves around servers, networking and self-hosting services you may as well set up your own blog.&lt;/p&gt;
&lt;p&gt;And so I did just that.&lt;/p&gt;
&lt;h3&gt;Picking a framework&lt;/h3&gt;
&lt;p&gt;I could easily have chosen a blogging platform such as &lt;a href="https://www.blogger.com/"&gt;Blogger&lt;/a&gt;, &lt;a href="https://ghost.org/"&gt;Ghost&lt;/a&gt; or &lt;a href="https://medium.com/"&gt;Medium&lt;/a&gt; to save me all the hazzle. However, I'm curious about servers, networks and infrastructure so I took this chance to set up and host my own blog. It's a healthy experience for every Software Developer to do Operations from time to time. Eventually, if I get fed up on managing my own server I'll move the blog to some hosted platform.&lt;/p&gt;
&lt;p&gt;I started looking around to see what other people did for their blog. At first I though about installing a fully blown CMS system on my server (inside a container or virtual machine) such as &lt;a href="https://wordpress.org/"&gt;WordPress&lt;/a&gt;. I was very close to &lt;a href="http://support.ghost.org/developers/"&gt;self-hosting Ghost&lt;/a&gt; after reading &lt;a href="https://blog.anmoljagetia.me/why-ghost/"&gt;Anmol Jagetia's Blog&lt;/a&gt;. The biggest pro's of a CMS system is the ability to write your blog in a simple WYSIWYG fashion from whatever computer you're using. But in the end I decided to go for a static blog site generator framwork without any server-side logic. Comments would be handled by &lt;a href="https://disqus.com/"&gt;Disqus&lt;/a&gt; plugin.&lt;/p&gt;
&lt;p&gt;I searched for and stumbled upon three strong candidates: &lt;a href="https://jekyllrb.com/"&gt;Jekyll&lt;/a&gt;, &lt;a href="http://blog.getpelican.com/"&gt;Pelican&lt;/a&gt; and &lt;a href="https://github.com/stef/utterson"&gt;Utterson&lt;/a&gt;. Jekyll seems to be the most active project and is amongst other things &lt;a href="https://jekyllrb.com/docs/github-pages/"&gt;powering GitHub Pages&lt;/a&gt; behind the scenes. Utterson is very simple and elegant and uses Unix shell scripting instead of high-level programming languages. I tried all three and ended on choosing Pelican mainly because I found &lt;a href="https://blog.alexandrevicenzi.com/flex-pelican-theme.html"&gt;a beautiful theme&lt;/a&gt; and it was the easiest to configure.&lt;/p&gt;
&lt;h3&gt;Hosting the blog&lt;/h3&gt;
&lt;p&gt;So now the process is this: I write my blogposts in Markdown on my laptop, then I render them to HTML with Pelican, commit and push them to my &lt;a href="https://github.com/bjk17/blog"&gt;GitHub repository&lt;/a&gt; and then finally &lt;code&gt;git pull&lt;/code&gt; them on my server. The process is a bit more manual then I'd prefer as I don't have direct SSH access to where I host my blog site. (I serve it from an LXC/LXD container behind an Apache proxy, but more on that later.) Pelican has built-in deployment tools that can render and deploy directly to your server over SSH. I would need to change my server infrastructure to be able to deploy in this way. This is something I will think about. It's ugly and &lt;em&gt;semantically incorrect&lt;/em&gt; (I'll be using this phrase a lot) to keep both the markdown files and the rendered HTML in source control. &lt;/p&gt;
&lt;p&gt;In the next few blog posts I want to write about my current server architecture/infrastructure hobby project and all the technical tidbits related to that. After all, that's why I started this blog.&lt;/p&gt;
&lt;p&gt;I appreciate all kinds of feedback so please drop a comment or send me an email if you like what I'm dealing with or have something to say.&lt;/p&gt;</summary><category term="DevOps"></category><category term="Pelican"></category></entry></feed>